<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
  <title>CPS Global Nav development</title>
  <script type="module">

    if (location.hostname === 'localhost') {
      const { worker } = await import('/mock-api/browser.js');
      await worker.start({
        onUnhandledRequest: 'bypass',
      });

    }

    await import('/build/cps-global-components.esm.js');
  </script>


  <style>
    body {
      margin: 0;
      padding: 0;
      position: relative;
      background-size: 2.9rem 2.9rem;
      background-image:
        linear-gradient(to right, #eee 1px, transparent 1px),
        linear-gradient(to bottom, #eee 1px, transparent 1px);
    }

    body>div {
      max-width: 90rem;
      margin: 0 auto;
    }

    body>div>div {
      min-height: 100rem;
    }
  </style>
</head>

<body>
  <!-- <div style="padding-top: 50px">
    <header></header>
    <div role="main"></div>
  </div> -->
  <div>
    <cps-global-header is-dcf="true"></cps-global-header>
  </div>

  <a id="myLink" href="/polaris-ui/case-details/45CV2911221/2/6789">Go to Case</a>
  <button onclick="changeLink()">Change link</button>
  <button onclick="navigate()">Navigate</button>

  <div class="case-info-details">
    <div>
      <p class="govuk-body">45CV2911222/3</p>
    </div>

  </div>

  <div id="div1">
    <div id="div2">
      <div>
        <main id="the-main-itself"></main>
      </div>
    </div>
  </div>

  <script>
    function changeLink() {
      // Example: change link to another case
      document.getElementById("myLink").href = "/polaris-ui/case-details/bar/456/999";
    }

    function navigate() {
      history.pushState({}, "", "/cases/1");
    }
  </script>
  <div></div>


</body>

<script>
  document.addEventListener("cps-global-header-event", (ev) => alert(`Event received with data: ${ev.detail}`));
</script>

<!-- <script>

  (function () {
    // Function to create and add a timestamped hyperlink
    function addTimestampedLink() {
      // Get current timestamp as integer (milliseconds since epoch)
      const timestamp = Date.now();

      // Create the hyperlink element
      const link = document.createElement('a');
      link.href = `https://foo.com/polaris-ui/case-details/foo/${timestamp}`;
      link.textContent = `Link added at ${new Date().toLocaleTimeString()} - ${timestamp}`;
      link.style.display = 'block';
      link.style.marginBottom = '5px';
      link.style.color = '#0066cc';
      link.style.textDecoration = 'underline';

      // Add click handler to show the timestamp
      link.addEventListener('click', function (e) {
        e.preventDefault();
        alert(`Timestamp: ${timestamp}`);
      });

      // Append to document body
      document.body.appendChild(link);
    }

    // Wait for DOM to be ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', function () {
        // Add first link immediately
        addTimestampedLink();

        // Then add a new link every 5 seconds
        setInterval(addTimestampedLink, 5000);
      });
    } else {
      // DOM is already ready
      addTimestampedLink();
      setInterval(addTimestampedLink, 5000);
    }
  })();
</script> -->

</html>